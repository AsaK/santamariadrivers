{% load static %}
<!doctype html>
<html lang="en" >
<head>
	<meta charset="utf-8" />
	<link rel="apple-touch-icon" sizes="76x76" href="{% static 'assets/img/apple-icon.png' %}">
	<link rel="icon" type="image/png" sizes="96x96" href="{% static 'assets/img/favicon.pn' %}g">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<title>Colégio Santa Emília - Área Administrativa</title>

	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />


    <!-- Bootstrap core CSS     -->
    <link href="{% static 'assets/css/bootstrap.min.css' %}" rel="stylesheet" />

    <!-- Animation library for notifications   -->
    <link href="{% static 'assets/css/animate.min.css' %}" rel="stylesheet"/>

    <!--  Paper Dashboard core CSS    -->
    <link href="{% static 'assets/css/paper-dashboard.css' %}" rel="stylesheet"/>


    <!--  CSS for Demo Purpose, don't include it in your project     -->
    <link href="{% static 'assets/css/demo.css' %}" rel="stylesheet" />


    <!--  Fonts and icons     -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css'>
    <link href="{% static 'assets/css/themify-icons.css' %}" rel="stylesheet">
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
		<link href="{% static 'assets/css/custom.css' %}" rel="stylesheet" />

</head>
<body>

	<div class="modal fade" tabindex="-1" role="dialog" id="modal_confirm">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	        <h4 class="modal-title">Perfil do motorista</h4>
	      </div>
	      <div class="modal-body">
					<div>
		        <div class="col-xs-4 col-md-3">
							<img src="https://placeholdit.imgix.net/~text?txtsize=33&txt=FOTO%20DO%20MOTORISTA&w=300&h=300" class="img-responsive" />
						</div>
						<div class="col-xs-8 col-md-6">
							<p class="font-grey margin-bottom-xs font-xs">
								Nome do motorista
							</p>
							<h4 class="nomargin-top font-sm font-bold" id="modal_nome">Erickson Holanda Vasconcelos</h4>
							<p class="font-grey margin-bottom-xs font-xs">
								Email
							</p>
							<h4 class="nomargin-top font-sm font-bold" id="modal_email">e.holanda@supportclik.com</h4>
							<p class="font-grey margin-bottom-xs font-xs">
								Endereço
							</p>
							<h4 class="nomargin-top font-sm font-bold" id="modal_endereco">Av. Tente Felipe Bandeira, Recife/PE</h4>
						</div>
						<div class="col-xs-offset-4 col-xs-8 col-md-offset-0 col-md-3">
							<p class="font-grey margin-bottom-xs font-xs">
								Data de nascimento
							</p>
							<h4 class="nomargin-top font-sm font-bold" id="modal_dtnasc">06/05/1991</h4>
							<p class="font-grey margin-bottom-xs font-xs">
								RG
							</p>
							<h4 class="nomargin-top font-sm font-bold" id="modal_rg">7.791.855</h4>
							<p class="font-grey margin-bottom-xs font-xs">
								CPF
							</p>
							<h4 class="nomargin-top font-sm font-bold" id="modal_cpf">079.848.344-07</h4>
						</div>
						<div class="clear"></div>
					</div>


					<div class="clear"></div>


					<div class="margin-top-lg">
		        <div class="col-xs-4 col-md-3">
							<img src="https://placeholdit.imgix.net/~text?txtsize=33&txt=FOTO%20DO%20CARRO&w=300&h=300" class="img-responsive" />
						</div>
						<div class="col-xs-8 col-md-6">
							<p class="font-grey margin-bottom-xs font-xs">
								Número da CNH
							</p>
							<h4 class="nomargin-top font-sm font-bold" id="modal_ncnh">22111223312</h4>
							<p class="font-grey margin-bottom-xs font-xs">
								Modelo do automóvel
							</p>
							<h4 class="nomargin-top font-sm font-bold" id="modal_modelo">Chevrolet Zafira</h4>
							<p class="font-grey margin-bottom-xs font-xs">
								Ano do automóvel
							</p>
							<h4 class="nomargin-top font-sm font-bold" id="modal_ano">2010</h4>
						</div>
						<div class="col-xs-offset-4 col-xs-8 col-md-offset-0 col-md-3">
							<p class="font-grey margin-bottom-xs font-xs">
								Data de expedição
							</p>
							<h4 class="nomargin-top font-sm font-bold" id="modal_dtexp">21/05/2009</h4>
							<p class="font-grey margin-bottom-xs font-xs">
								Data de validade
							</p>
							<h4 class="nomargin-top font-sm font-bold" id="modal_dtval">22/05/2020</h4>
							<p class="font-grey margin-bottom-xs font-xs">
								Placa do automóvel
							</p>
							<h4 class="nomargin-top font-sm font-bold" id="modal_placa">KGB - 1954</h4>
						</div>
						<div class="clear"></div>
					</div>
	      </div>
	      <div class="modal-footer">
					<!-- <button type="button" class="btn btn-primary btn-simple pull-left"><i class="ti-pencil font-sm"></i> Editar</button> -->
	        <button type="button" class="btn btn_square btn-success btn-fill"><i class="ti-check font-sm"></i> Aprovar</button>
	        <button type="button" class="btn btn-danger btn_square btn-fill" data-dismiss="modal" id="btn_recusar"><i class="ti-close font-sm"></i> Recusar</button>
	      </div>
	    </div><!-- /.modal-content -->
	  </div><!-- /.modal-dialog -->
	</div><!-- /.modal -->


	<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="modal_motivo">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
			<div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h5 class="modal-title" id="myModalLabel">Porque o motorista não foi aprovado?</h5>
      </div>
      <div class="modal-body">
      	<textarea id="modal_motivo_text" rows="6" class="form-control form-control-custom" placeholder="Digite o motivo do motorista não ser aprovado"></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn_square btn-fill" data-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-success btn_square btn-fill" id="btn_recusar_concluir">Concluir</button>
      </div>
    </div>
  </div>
</div>



<div class="wrapper">
	<div class="col-md-10 centered">
    <div class="main-panel">
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle">
                        <a href="{% url 'logout' %}"><i class="ti-power-off"></i></a>
                    </button>
                    <a class="navbar-brand" href="#">Área Administrativa</a>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">

												<li class="dropdown">
															<a href="#" class="dropdown-toggle" data-toggle="dropdown">
																<p>{{ request.user.email }}</p>
																<b class="caret"></b>
															</a>
															<ul class="dropdown-menu">
																<li><a href="{% url 'logout' %}">Sair do sistema</a></li>
															</ul>
												</li>
                    </ul>

                </div>
            </div>
        </nav>


        <div class="content">
            <div class="container-fluid">
                <div class="row">
										<a href="?status=">
                    <div class="col-lg-3 col-sm-6">
                        <div class="card">
                            <div class="content">
                                <div class="row">
                                    <div class="col-xs-5">
                                        <div class="icon-big icon-primary text-center">
                                            <i class="ti-car"></i>
                                        </div>
                                    </div>
                                    <div class="col-xs-7">
                                        <div class="numbers font-grey">
                                            {{total_motoristas}}
																						<p class="font-light">Motoristas</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
										</a>
										<a href="?status=E">
                    <div class="col-lg-3 col-sm-6">
                        <div class="card">
                            <div class="content">
                                <div class="row">
                                    <div class="col-xs-5">
                                        <div class="icon-big icon-warning text-center">
                                            <i class="ti-flag"></i>
                                        </div>
                                    </div>
                                    <div class="col-xs-7">
                                        <div class="numbers font-grey">
                                            {{motoristas_pendentes}}
																						<p class="font-light">pendentes</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
										</a>
										<a href="?status=A">
                    <div class="col-lg-3 col-sm-6">
                        <div class="card">
                            <div class="content">
                                <div class="row">
                                    <div class="col-xs-5">
                                        <div class="icon-big icon-success text-center">
                                            <i class="ti-check-box"></i>
                                        </div>
                                    </div>
                                    <div class="col-xs-7">
                                        <div class="numbers font-grey">
                                            {{motoristas_aprovados}}
																						<p class="font-light">Aprovados</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
										</a>
										<a href="?status=R">
                    <div class="col-lg-3 col-sm-6">
                        <div class="card">
                            <div class="content">
                                <div class="row">
                                    <div class="col-xs-5">
                                        <div class="icon-big icon-danger text-center">
                                            <i class="ti-close"></i>
                                        </div>
                                    </div>
                                    <div class="col-xs-7">
                                        <div class="numbers font-grey">
                                            {{motoristas_rejeitados}}
																						<p class="font-light">Recusados</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
										</a>
                </div>
								<div class="row">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="header">
                                <h4 class="title font-bold margin-bottom-xs">Lista de motoristas <button class="btn btn-primary border-width-xs btn_square btn-fill pull-right btn-sm btn-primary-custom"><i class="ti-cloud-down font-sm"></i> <span class="hidden-xs">Baixar relatório</span></button></h4>
																<div class="clear margin-bottom-xs"></div>
																<p class="category margin-bottom-xs hidden-xs">Confira a lista de motoristas cadastrados no sistema</p>
                            </div>
                            <div class="content">

																<h5 class="col-md-5 font-bold">Motorista</h5>
																<h5 class="col-md-3 font-bold hidden-xs">Email</h5>
																<h5 class="col-md-2 font-bold hidden-xs">Celular</h5>
																<h5 class="col-md-2 text-center font-bold hidden-xs">Status</h5>

																<div class="clear">

																</div>

																{% for motorista in object_list %}
																		<div class="item-motorista">
																			<p class="col-xs-12 col-md-5 font-light item-motorista-nome">
																				<a href="#">{{ motorista.nome }}</a>
																			</p>
																			<p class="col-xs-12 col-md-3 font-light">
																				<small>{{ motorista.usuario.email }}</small>
																			</p>
																			<p class="col-xs-6 col-md-2 font-light">
																				<small>(81) 98475-5041</small>
																			</p>
																			<p class="col-xs-6 col-md-2 font-light text-center">
																				{% if motorista.status == 'E' %}
																				<button class="btn btn-warning border-width-xs btn-xs btn-fill btn_square btn_pendente"
																					data-id="{{ motorista.id }}"
																					data-nome="{{ motorista.nome }}" data-email="{{ motorista.usuario.email }}" data-endereco="{{ motorista.endereco }}" data-dtnasc="{{ motorista.data_nascimento }}" data-rg="{{ motorista.rg }}" data-cpf="{{ motorista.cpf }}"
																					data-ncnh="{{ motorista.cnh_numero }}" data-modelo="{{ motorista.modelo }}" data-ano="{{ motorista.ano }}" data-placa="{{ motorista.placa }}" data-dtexp="{{ motorista.cnh_primeira }}" data-dtval="{{ motorista.cnh_validade }}"
																				>Pendente <i class="caret"></i></button>
																				{% endif %}
																				{% if motorista.status == 'A' %}
																				<button class="btn btn-success btn-xs btn-simple"><b>Aprovado</b></button>
																				{% endif %}
																				{% if motorista.status == 'R' %}
																				<button class="btn btn-danger btn-xs btn-simple"><b>Recusado</b></button>
																				{% endif %}
																			</p>
																			<div class="clear"></div>
																		</div>
																{% endfor %}

																<!-- <div class="col-xs-12">
																	<nav aria-label="Page navigation">
																	  <ul class="pagination">
																	    <li>
																	      <a href="#" aria-label="Previous">
																	        <span aria-hidden="true">&laquo;</span>
																	      </a>
																	    </li>
																	    <li><a href="#">1</a></li>
																	    <li><a href="#">2</a></li>
																	    <li><a href="#">3</a></li>
																	    <li><a href="#">4</a></li>
																	    <li><a href="#">5</a></li>
																	    <li>
																	      <a href="#" aria-label="Next">
																	        <span aria-hidden="true">&raquo;</span>
																	      </a>
																	    </li>
																	  </ul>
																	</nav>
																</div> -->

																<div class="clear"></div>
																{% if is_paginated %}
																<div class="col-xs-12">
																	<nav aria-label="Page navigation">
																	  <ul class="pagination">
																		{% if page_obj.has_previous %}
																			<li>
																				<a href="?page={{ page_obj.previus_page_number }}" aria-label="Previous">
																					<span aria-hidden="true">&laquo;</span>
																				</a>
																			</li>
														        {% endif %}
														        {% for page in page_obj.paginator.page_range %}
														            {% if page_obj.number == page %}
														                <li class="page-item active">
														                    <a class="page-link">{{ page }}</a>
														                </li>
														            {% else %}
														                <li class="page-item">
														                    <a class="page-link" href="?page={{ page }}">{{ page }}</a>
														                </li>
														            {% endif %}
														        {% endfor %}
														        {% if page_obj.has_next %}
																			<li>
																				<a href="?page={{ page_obj.next_page_number }}" aria-label="Next">
																					<span aria-hidden="true">&raquo;</span>
																				</a>
																			</li>
														        {% endif %}
																		</ul>
																	</nav>
																</div>
																{% endif %}
																<div class="clear"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <footer class="footer">
            <div class="container-fluid">
                <div class="copyright text-center">
                	Desenvolvido com <i class="fa fa-heart heart"></i> pelos <b>piratas da casa 15</b>
                </div>
            </div>
        </footer>

    </div>
		<div class="clear">	</div>
	</div>
</div>


</body>

    <!--   Core JS Files   -->
    <script src="{% static 'assets/js/jquery-1.10.2.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/js/bootstrap.min.js' %}" type="text/javascript"></script>

	<!--  Checkbox, Radio & Switch Plugins -->
	<script src="{% static 'assets/js/bootstrap-checkbox-radio.js' %}"></script>



    <!--  Notifications Plugin    -->
    <script src="{% static 'assets/js/bootstrap-notify.js' %}"></script>

    <!--  Google Maps Plugin    -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js"></script>

    <!-- Paper Dashboard Core javascript and methods for Demo purpose -->
	<script src="{% static 'assets/js/paper-dashboard.js' %}"></script>

	<!-- Paper Dashboard DEMO methods, don't include it in your project! -->
	<!--<script src="assets/js/demo.js"></script>-->

	<script type="text/javascript">
    	$(document).ready(function(){

				var modal_confirm = $("#modal_confirm");
				var btn_pendente = $('.btn_pendente');
				var btn_recusar = $("#btn_recusar");
				var modal_motivo = $("#modal_motivo");
				var btn_recusar_concluir = $("#btn_recusar_concluir");
				var motivo_txt = $('#modal_motivo_text');

				// $("#modal_confirm").modal('show');
				// $("#btn_recusar").click(function(){
				// 	$("#modal_confirm").modal('show');
				// 	$("#modal_motivo").modal('show');
				// });

				btn_pendente.click(function(){
					var id = $(this).attr('data-id');
					var nome = $(this).attr('data-nome');$('#modal_nome').html(nome);
					var email = $(this).attr('data-email');$('#modal_email').html(email);
					var endereco = $(this).attr('data-endereco');$('#modal_endereco').html(endereco);
					var dtnasc = $(this).attr('data-dtnasc');$('#modal_dtnasc').html(dtnasc);
					var rg = $(this).attr('data-rg');$('#modal_rg').html(rg);
					var cpf = $(this).attr('data-cpf');$('#modal_cpf').html(cpf);
					var ncnh = $(this).attr('data-ncnh');$('#modal_ncnh').html(ncnh);
					var modelo = $(this).attr('data-modelo');$('#modal_modelo').html(modelo);
					var ano = $(this).attr('data-ano');$('#modal_ano').html(ano);
					var dtexp = $(this).attr('data-dtexp');$('#modal_dtexp').html(dtexp);
					var dtval = $(this).attr('data-dtval');$('#modal_dtval').html(dtval);
					var placa = $(this).attr('data-placa');$('#modal_placa').html(placa);

					modal_confirm.modal('show');

					btn_recusar.click(function(){
						modal_motivo.modal('show');
						btn_recusar_concluir.click(function(){
							var motivo_text = motivo_txt.val();
							var motorista_id = id;
							$.post('/changestatus',{
								idMotorista:motorista_id,
								status:"R",
								motivo:motivo_txt
							},function(retorno){
								console.log(retorno);
							});
						});
					});

				});



    	});
	</script>

</html>
